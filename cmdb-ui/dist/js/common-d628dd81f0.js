function get_server_name_list(){var e=new Array;return $.ajax({type:"GET",url:"http://cmdb.wanda.cn/api/async/v1/servers/list",async:!1,contentType:"application/json;charset=utf-8",success:function(t){0==t.status&&(e=t.msg)},error:function(e,t){alert(t)}}),e}function show_server_name(e){e.empty(),e.append("<option selected='selected'  value=0>请选择..</option>");for(var t=0;t<name_list.length;t++)index=t+1,e.append("<option  value="+index+">"+name_list[t]+"</option>")}function get_server_index(e){for(var t=0;t<select_server_list.length;t++)if(select_server_list[t]==e)return t;return-1}function set_server_list(e){e.each(function(e,t){t.onclick=function(){var e=get_server_index($(this).text());$(this).hasClass("active")?($(this).attr("class","btn-default btn-lg"),$(this).button("reset"),e>=0&&select_server_list.splice(e,1)):($(this).attr("class","btn-success btn-lg"),$(this).button("toggle"),e==-1&&select_server_list.push($(this).text()))}})}function set_server_group(e){var t=$("#server_group");t.empty();var s='<li class="container"><ul class="list-inline">';if(0!=e.length){for(var r=new Array,n=0,i=e.length;n<i;n+=10)r.push(e.slice(n,n+10));for(var a=0;a<r.length;a++){for(var l=s,c=0;c<r[a].length;c++)l=l+'<button class="btn-default btn-lg" id="server_list_btn_'+r[a][c]+'">'+r[a][c]+"</button>";l+="</ul></li>",t.append('<li class="list-group-item"'+l+"</li>")}}else l=s+"<p>不存在该标签服务器</p></ul></li>",t.append('<li class="list-group-item"'+l+"</li>");set_server_list($("#server_list_container :button"))}function get_host_ip(e){var t=api_server_url+"/api/async/v1/server/ip/"+e,s="";return $.ajax({type:"GET",url:t,async:!1,contentType:"application/json;charset=utf-8",dataType:"json",success:function(e){0==e.status&&(s=e.msg)},error:function(e,t){alert(e.msg)}}),s}function get_hosts_ip(){for(var e=new Array,t=0;t<select_server_list.length;t++)e.push(get_host_ip(select_server_list[t]));return e}function check_servers_os_version_equal(){var e=new Array;if(select_server_list.length<2)return!0;for(var t=0;t<select_server_list.length;t++)$.ajax({type:"GET",url:api_server_url+"/api/async/v1/server/info?condition=server_name&&value="+select_server_list[t],async:!1,contentType:"application/json;charset=utf-8",dataType:"json",success:function(t){if(0==t.status&&0!=t.msg){var s=t.msg.system_type;$.inArray(s,e)==-1&&e.push(s)}},error:function(e){alert(e)}});return 1==e.length}var api_server_url="http://cmdb.wanda.cn",name_list=get_server_name_list(),select_server_list=new Array;