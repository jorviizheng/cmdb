function get_current_hostname(){var t=get_hosts_ip(),e=$("#sync_result_show_list");e.empty();var s="";if(t.length>1)s='<button type="button" class="list-group-item-danger">主机名修改不支持批量选择</button>',e.append(s),$("#hostname_btn").attr("disabled",!0);else if(0==t.length)s='<button type="button" class="list-group-item-danger">未选择服务器，请选择</button>',e.append(s);else{$("#hostname_btn").attr("disabled",!1);var a=JSON.stringify({host:t});$.ajax({type:"POST",url:api_server_url+"/api/sync/v1/hostname",data:a,contentType:"application/json;charset=utf-8",dataType:"json",async:!1,success:function(a){var n=a.msg[t[0]];0==a.status?(s='<button type="button" class="list-group-item-success">'+select_server_list[0]+" 主机名为:"+n.msg+"</button>",$("#hostname_btn").attr("disabled",!1)):(s='<button type="button" class="list-group-item-danger">'+select_server_list[0]+" 主机名获取失败，失败原因:"+n.msg+"</button>",$("#hostname_btn").attr("disabled",!0)),e.append(s)},error:function(t){alert(t),$("#hostname_btn").attr("disabled",!0)}})}}function hostname_task(){var t=get_hosts_ip(),e=$("#sync_result_show_list");e.empty();var s="";if(0==t.length)s='<button type="button" class="list-group-item-danger">未选择服务器，请选择</button>',e.append(s);else if(t.length>1)s='<button type="button" class="list-group-item-danger">主机名修改不支持批量选择</button>',e.append(s);else{var a=$("#host_name_input").val();if(""!=a){var n=datetime_human(),o=$.cookie("unick"),i=o+"_ansible_hostname_"+datetime_str(),r=JSON.stringify({host:t,host_name:a,module:"hostname"}),l=JSON.stringify({type:"ansible"}),u=JSON.stringify({user_name:o,task_name:i,task_type:"timely",task_flag:l,task_args:r,create_time:n,update_time:n});$.ajax({type:"POST",url:api_server_url+"/api/async/v1/tasks",data:u,contentType:"application/json;charset=utf-8",dataType:"json",success:function(t){1==t.status&&alert("任务已添加，请到任务界面查看详细信息"),window.location.reload()},error:function(t){alert(t.msg),window.location.reload()}})}else s='<button type="button" class="list-group-item-danger">hostname 为空</button>',e.append(s)}}